<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Jobs · JuliaHub.jl</title><meta name="title" content="Jobs · JuliaHub.jl"/><meta property="og:title" content="Jobs · JuliaHub.jl"/><meta property="twitter:title" content="Jobs · JuliaHub.jl"/><meta name="description" content="Documentation for JuliaHub.jl."/><meta property="og:description" content="Documentation for JuliaHub.jl."/><meta property="twitter:description" content="Documentation for JuliaHub.jl."/><meta property="og:url" content="https://help.juliahub.com/julia-api/stable/guides/jobs/"/><meta property="twitter:url" content="https://help.juliahub.com/julia-api/stable/guides/jobs/"/><link rel="canonical" href="https://help.juliahub.com/julia-api/stable/guides/jobs/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaHub.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting-started/">Getting Started</a></li><li><span class="tocitem">Guides</span><ul><li><a class="tocitem" href="../authentication/">Authentication</a></li><li><a class="tocitem" href="../datasets/">Datasets</a></li><li class="is-active"><a class="tocitem" href>Jobs</a><ul class="internal"><li><a class="tocitem" href="#jobs-guide-batch"><span>Submitting batch jobs</span></a></li><li><a class="tocitem" href="#Query,-extend,-kill"><span>Query, extend, kill</span></a></li><li><a class="tocitem" href="#Waiting-on-jobs"><span>Waiting on jobs</span></a></li><li><a class="tocitem" href="#Accessing-job-outputs"><span>Accessing job outputs</span></a></li><li><a class="tocitem" href="#jobs-batch-expose-port"><span>Opening ports on batch jobs</span></a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../reference/authentication/">Authentication</a></li><li><a class="tocitem" href="../../reference/job-submission/">Job submission</a></li><li><a class="tocitem" href="../../reference/jobs/">Jobs</a></li><li><a class="tocitem" href="../../reference/datasets/">Datasets</a></li><li><a class="tocitem" href="../../reference/exceptions/">Exceptions</a></li></ul></li><li><a class="tocitem" href="../../release-notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guides</a></li><li class="is-active"><a href>Jobs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Jobs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaComputing/JuliaHub.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaComputing/JuliaHub.jl/blob/main/docs/src/guides/jobs.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Jobs"><a class="docs-heading-anchor" href="#Jobs">Jobs</a><a id="Jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Jobs" title="Permalink"></a></h1><p>JuliaHub.jl can be used to both <a href="../../reference/job-submission/">submit new jobs</a>, and to <a href="../../reference/jobs/">inspect running or finished jobs</a>.</p><ul><li><a href="#jobs-guide-batch">Submitting batch jobs</a></li><li class="no-marker"><ul><li><a href="#jobs-batch-script">Script jobs</a></li><li><a href="#jobs-batch-appbundles">Appbundles</a></li><li><a href="#Examining-job-configuration">Examining job configuration</a></li></ul></li><li><a href="#Query,-extend,-kill">Query, extend, kill</a></li><li><a href="#Waiting-on-jobs">Waiting on jobs</a></li><li><a href="#Accessing-job-outputs">Accessing job outputs</a></li><li><a href="#jobs-batch-expose-port">Opening ports on batch jobs</a></li></ul><h2 id="jobs-guide-batch"><a class="docs-heading-anchor" href="#jobs-guide-batch">Submitting batch jobs</a><a id="jobs-guide-batch-1"></a><a class="docs-heading-anchor-permalink" href="#jobs-guide-batch" title="Permalink"></a></h2><p>A common use case for this package is to programmatically submit Julia scripts as batch jobs to JuliaHub, to start non-interactive workloads. In a nutshell, these are Julia scripts, together with an optional Julia environment, that get executed on the allocated hardware.</p><p>The easiest way to start a batch job is to submit a <a href="#jobs-batch-script">single Julia script</a>, which can optionally also include a Julia environment with the job. However, for more complex jobs, with multiple inputs files etc., <a href="#jobs-batch-appbundles">appbundles</a> are likely more suitable.</p><h3 id="jobs-batch-script"><a class="docs-heading-anchor" href="#jobs-batch-script">Script jobs</a><a id="jobs-batch-script-1"></a><a class="docs-heading-anchor-permalink" href="#jobs-batch-script" title="Permalink"></a></h3><p>The simplest job one can submit is a humble Julia script, together with an optional Julia environment (i.e. <code>Project.toml</code>, <code>Manifest.toml</code>, and/or <code>Artifacts.toml</code>). These jobs can be created with the <a href="../../reference/job-submission/#JuliaHub.@script_str"><code>JuliaHub.@script_str</code></a> string macro, for inline instantiation:</p><pre><code class="language-julia hljs">JuliaHub.submit_job(
    JuliaHub.script&quot;&quot;&quot;
    @warn &quot;Hello World!&quot;
    &quot;&quot;&quot;,
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.Job</span>: jr-xf4tslavut (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files: 
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code></pre><p>Alternatively, they can be created with the <a href="../../reference/job-submission/#JuliaHub.script"><code>script</code></a> function, which can load the Julia code from a script file:</p><pre><code class="language-julia hljs">JuliaHub.submit_job(
    JuliaHub.script(&quot;myscript.jl&quot;),
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.Job</span>: jr-xf4tslavut (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files: 
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code></pre><p>The string macro also picks up the currently running environment (i.e. <code>Project.toml</code>, <code>Manifest.toml</code>, and <code>Artifacts.toml</code> files), which then gets instantiated on JuliaHub when the script is started. If necessary, this can be disabled by appending the <code>noenv</code> suffix to the string macro.</p><pre><code class="language-julia hljs">JuliaHub.script&quot;&quot;&quot;
@warn &quot;Hello World!&quot;
&quot;&quot;&quot;noenv</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.BatchJob:</span>
code = &quot;&quot;&quot;
@warn &quot;Hello World!&quot;
&quot;&quot;&quot;</code></pre><p>With the <a href="../../reference/job-submission/#JuliaHub.script"><code>script</code></a> function, you can also specify a path to directory containing the Julia package environment, if necessary.</p><p>If an environment is passed with the job, it gets instantiated on the JuliaHub node, and the script is run in that environment. As such, any packages that are not available in the package registries or added via public Git URLs will not work. If that is the case, <a href="#jobs-batch-appbundles">appbundles</a> can be used instead to submit jobs that include private or local dependencies.</p><h3 id="jobs-batch-appbundles"><a class="docs-heading-anchor" href="#jobs-batch-appbundles">Appbundles</a><a id="jobs-batch-appbundles-1"></a><a class="docs-heading-anchor-permalink" href="#jobs-batch-appbundles" title="Permalink"></a></h3><p>A more advanced way of submitting a batch job is as an <em>appbundle</em>, which &quot;bundles up&quot; a whole directory and submits it together with the script. The Julia environment in the directory is also immediately added into the bundle.</p><p>An appbundle can be constructed with the <a href="../../reference/job-submission/#JuliaHub.appbundle"><code>appbundle</code></a> function, which takes as arguments the path to the directory to be bundled up, and a script <em>within that directory</em>. This is meant to be used for project directories where you have your Julia environment in the top level of the directory or repository.</p><p>For example, suppose you have a script at the top level of your project directory, then you can submit a bundle as follows:</p><pre><code class="language-julia hljs">JuliaHub.submit_job(
    JuliaHub.appbundle(@__DIR__, &quot;script.jl&quot;),
    ncpu = 4, memory = 16,
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.Job</span>: jr-xf4tslavut (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files: 
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code></pre><p>The bundler looks for a Julia environment (i.e. <code>Project.toml</code>, <code>Manifest.toml</code>, and/or <code>Artifacts.toml</code> files) at the root of the directory. If the environment does not exist (i.e. the files are missing), one is created. When the job starts on JuliaHub, this environment is instantiated.</p><p>A key feature of the appbundle is that development dependencies of the environment (i.e. packages added with <code>pkg&gt; develop</code> or <code>Pkg.develop()</code>) are also bundled up into the archive that gets submitted to JuliaHub (including any current, uncommitted changes). Registered packages are installed via the package manager via the standard environment instantiation, and their source code is not included in the bundle directly.</p><p>When the JuliaHub job starts, the working directory is set to the root of the unpacked appbundle directory. This should be kept in mind especially when launching a script that is not at the root itself, and trying to open other files from the appbundle in that script (e.g. with <code>open</code>). You can still use <code>@__DIR__</code> to load files relative to the script, and <code>include</code>s also work as expected (i.e. relative to the script file).</p><p>Finally, a <code>.juliabundleignore</code> file can be used to exclude certain directories, by adding the relevant <a href="https://en.wikipedia.org/wiki/Glob_(programming)">globs</a>, similar to how <code>.gitignore</code> files work. In addition, <code>.git</code> directories are also automatically excluded from the bundle.</p><h3 id="Examining-job-configuration"><a class="docs-heading-anchor" href="#Examining-job-configuration">Examining job configuration</a><a id="Examining-job-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Examining-job-configuration" title="Permalink"></a></h3><p>The <code>dryrun</code> option to <a href="../../reference/job-submission/#JuliaHub.submit_job"><code>submit_job</code></a> can be used to inspect the full job workload configuration that would be submitted to JuliaHub.</p><pre><code class="language-julia hljs">JuliaHub.submit_job(
    JuliaHub.script&quot;&quot;&quot;
    println(&quot;hello world&quot;)
    &quot;&quot;&quot;,
    ncpu = 4, memory = 8,
    env = Dict(&quot;ARG&quot; =&gt; &quot;value&quot;),
    dryrun = true
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.WorkloadConfig:</span>
application:
  <span class="sgr1">JuliaHub.BatchJob:</span>
  code = &quot;&quot;&quot;
  println(&quot;hello world&quot;)
  &quot;&quot;&quot;
  sha256(project_toml) = 62aca0c4b58726ab88c7beaa448e4ca3d51ba68c2d4f9c244b22e09dfe2919d1
  sha256(manifest_toml) = 1a104dd78d19c1b60602a99aa6e62f10fc88310ec7f24c9e80fe0e6d7be41945
compute:
  <span class="sgr1">JuliaHub.ComputeConfig</span>
   <span class="sgr1">Node: </span>3.5 GHz Intel Xeon Platinum 8375C
   <span class="sgr1"> - GPU: </span>no
   <span class="sgr1"> - vCores: </span>4
   <span class="sgr1"> - Memory: </span>16 Gb
   <span class="sgr1"> - Price: </span>0.33 $/hr
   Process per node: true
   Number of nodes: 1
timelimit = 1 hour, 
env: 
  ARG: value</code></pre><h2 id="Query,-extend,-kill"><a class="docs-heading-anchor" href="#Query,-extend,-kill">Query, extend, kill</a><a id="Query,-extend,-kill-1"></a><a class="docs-heading-anchor-permalink" href="#Query,-extend,-kill" title="Permalink"></a></h2><p>The package has function that can be used to interact with running and past jobs. The <a href="../../reference/jobs/#JuliaHub.jobs"><code>jobs</code></a> function can be used to list jobs, returning an array of <a href="../../reference/jobs/#JuliaHub.Job"><code>Job</code></a> objects.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; js = JuliaHub.jobs(limit=3)</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{JuliaHub.Job}:
 JuliaHub.job(&quot;jr-eezd3arpcj&quot;)
 JuliaHub.job(&quot;jr-novcmdtiz6&quot;)
 JuliaHub.job(&quot;jr-3eka6z321p&quot;)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; js[1]</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">JuliaHub.Job</span>: jr-eezd3arpcj (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files:
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code></pre><p>If you know the name of the job, you can also query the job directly with <a href="../../reference/jobs/#JuliaHub.job"><code>job</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; job = JuliaHub.job(&quot;jr-eezd3arpcj&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">JuliaHub.Job</span>: jr-eezd3arpcj (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files:
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
  - outdir.tar.gz (result; 632143 bytes)
 outputs: &quot;{\&quot;result_variable\&quot;: 1234, \&quot;another_result\&quot;: \&quot;value\&quot;}\n&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; job.status</code><code class="nohighlight hljs ansi" style="display:block;">&quot;Completed&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; JuliaHub.isdone(job)</code><code class="nohighlight hljs ansi" style="display:block;">true</code></pre><p>Similarly, the <a href="../../reference/jobs/#JuliaHub.kill_job"><code>kill_job</code></a> function can be used to stop a running job, and the <a href="../../reference/jobs/#JuliaHub.extend_job"><code>extend_job</code></a> function can be used to extend the job&#39;s time limit.</p><h2 id="Waiting-on-jobs"><a class="docs-heading-anchor" href="#Waiting-on-jobs">Waiting on jobs</a><a id="Waiting-on-jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Waiting-on-jobs" title="Permalink"></a></h2><p>A common pattern in a script is to submit one or more jobs, and then wait until the jobs complete, to then process their outputs. <a href="../../reference/jobs/#JuliaHub.isdone"><code>isdone</code></a> can be used to see if a job has completed.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; job = JuliaHub.job(&quot;jr-novcmdtiz6&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">JuliaHub.Job</span>: jr-novcmdtiz6 (Running)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files:
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; JuliaHub.isdone(job)</code><code class="nohighlight hljs ansi" style="display:block;">false</code></pre><p>The <a href="../../reference/jobs/#JuliaHub.wait_job"><code>wait_job</code></a> function also provides a convenient way for a script to wait for a job to finish.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; job = JuliaHub.wait_job(&quot;jr-novcmdtiz6&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">JuliaHub.Job</span>: jr-novcmdtiz6 (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 files:
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; JuliaHub.isdone(job)</code><code class="nohighlight hljs ansi" style="display:block;">true</code></pre><h2 id="Accessing-job-outputs"><a class="docs-heading-anchor" href="#Accessing-job-outputs">Accessing job outputs</a><a id="Accessing-job-outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-job-outputs" title="Permalink"></a></h2><p>There are two ways a JuliaHub job can store outputs that are directly related to a specific job<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>:</p><ol><li>Small, simple outputs can be stored by setting the <code>ENV[&quot;RESULTS&quot;]</code> environment variable. Conventionally, this is often set to a JSON object, and will act as a dictionary of key value pairs.</li><li>Files or directories can be uploaded by setting the <code>ENV[&quot;RESULTS_FILE&quot;]</code> to a local file path on the job. Note that directories are combined into a single tarball when uploaded.</li></ol><p>The values set via the <code>RESULTS</code> environment variable can be accessed with the <code>.results</code> field of a <a href="../../reference/jobs/#JuliaHub.Job"><code>Job</code></a> object:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; job.results</code><code class="nohighlight hljs ansi" style="display:block;">&quot;{\&quot;user_param\&quot;: 2, \&quot;output_value\&quot;: 4}\n&quot;</code></pre><p>As the <code>.results</code> string is often a JSON object, you can use the the <a href="https://github.com/JuliaIO/JSON.jl">JSON.jl</a> or <a href="https://github.com/quinnj/JSON3.jl">JSON3.jl</a> packages to easily parse it. For example</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; import JSON</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; JSON.parse(job.results)</code><code class="nohighlight hljs ansi" style="display:block;">Dict{String, Any} with 2 entries:
  &quot;user_param&quot;   =&gt; 2
  &quot;output_value&quot; =&gt; 4</code></pre><p>When it comes to job result files, they can all be accessed via the <code>.files</code> field.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; job.files</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{JuliaHub.JobFile}:
 JuliaHub.job_file(JuliaHub.job(&quot;jr-novcmdtiz6&quot;), :input, &quot;code.jl&quot;)
 JuliaHub.job_file(JuliaHub.job(&quot;jr-novcmdtiz6&quot;), :source, &quot;code.jl&quot;)
 JuliaHub.job_file(JuliaHub.job(&quot;jr-novcmdtiz6&quot;), :project, &quot;Project.toml&quot;)
 JuliaHub.job_file(JuliaHub.job(&quot;jr-novcmdtiz6&quot;), :project, &quot;Manifest.toml&quot;)</code></pre><p>The <a href="../../reference/jobs/#JuliaHub.job_files"><code>job_files</code></a> function can be used to filter down to specific file types.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; JuliaHub.job_files(job, :result)</code><code class="nohighlight hljs ansi" style="display:block;">JuliaHub.JobFile[]</code></pre><p>And if you know the name of the file, you can also use the <a href="../../reference/jobs/#JuliaHub.job_files"><code>job_files</code></a> to get the specific <a href="../../reference/jobs/#JuliaHub.JobFile"><code>JobFile</code></a> object for a particular file directly.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; jobfile = JuliaHub.job_file(job, :result, &quot;outdir.tar.gz&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>To actually fetch the contents of a file, you can use the <a href="../../reference/jobs/#JuliaHub.download_job_file"><code>download_job_file</code></a> function on the <a href="../../reference/jobs/#JuliaHub.JobFile"><code>JobFile</code></a> objects.</p><h2 id="jobs-batch-expose-port"><a class="docs-heading-anchor" href="#jobs-batch-expose-port">Opening ports on batch jobs</a><a id="jobs-batch-expose-port-1"></a><a class="docs-heading-anchor-permalink" href="#jobs-batch-expose-port" title="Permalink"></a></h2><p>If supported for a given product and user, you can expose a single port on the job serving a HTTP server, to do HTTP requests to the job from the outside. This could be used to run &quot;interactive&quot; jobs that respond to user inputs, or to poll the job for data.</p><p>For example, the following job would run a simple <a href="https://juliahub.com/ui/Packages/General/Oxygen">Oxygen.jl-based server</a> that exposes a simple API at the <code>/</code> path.</p><pre><code class="language-julia hljs">job = JuliaHub.submit_job(
    JuliaHub.script&quot;&quot;&quot;
    using Oxygen, HTTP
    PORT = parse(Int, ENV[&quot;PORT&quot;])
    @get &quot;/&quot; function(req::HTTP.Request)
        return &quot;success&quot;
    end
    serve(; host=&quot;0.0.0.0&quot;, port = PORT)
    &quot;&quot;&quot;,
    expose = 8080,
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">JuliaHub.Job</span>: jr-xf4tslavut (Completed)
 submitted: 2023-03-15T07:56:50.974+00:00
 started:   2023-03-15T07:56:51.251+00:00
 finished:  2023-03-15T07:56:59.000+00:00
 hostname:  afyux.launch.juliahub.app
 files: 
  - code.jl (input; 3 bytes)
  - code.jl (source; 3 bytes)
  - Project.toml (project; 244 bytes)
  - Manifest.toml (project; 9056 bytes)
 outputs: &quot;{}&quot;</code></pre><p>Note that, unlike a usual batch job, this job has a <code>.hostname</code> property, that will point to the DNS hostname that can be used to access the server exposed by the job (see also <a href="../../reference/jobs/#jobs-apis-expose-ports">the relevant reference section</a>).</p><p>Once the job has started and the Oxygen-based server has started serving the page, you can perform <a href="https://juliahub.com/ui/Packages/General/HTTP">HTTP.jl</a> requests against the job with the <a href="../../reference/jobs/#JuliaHub.request"><code>JuliaHub.request</code></a> function, which is thin wrapper around the <code>HTTP.request</code> function that sets up the necessary authentication headers and constructs the full URL.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; JuliaHub.request(job, &quot;GET&quot;, &quot;/&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">HTTP.Messages.Response:
&quot;&quot;&quot;
HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8
Content-Length: 7

success&quot;&quot;&quot;</code></pre><div class="admonition is-info"><header class="admonition-header">502 Bad Gateway</header><div class="admonition-body"><p>When the job is starting up or if the HTTP server in the job is not running, you can expect a <code>502 Bad Gateway</code> HTTP response from the job domain.</p></div></div><div class="admonition is-success"><header class="admonition-header">HTML page</header><div class="admonition-body"><p>If the server can serve a HTML page, then you can also access the job in the browser. The web UI will also have a &quot;Connect&quot; link, like for other interactive applications.</p></div></div><div class="admonition is-info"><header class="admonition-header">Pricing</header><div class="admonition-body"><p>Jobs that expose ports may be priced differently per hour than batch jobs that do not open ports.</p></div></div><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>You can also e.g. <a href="../../reference/datasets/#datasets">upload datasets</a> etc. But in that case the resulting data is not, strictly speaking, related to a specific job.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../datasets/">« Datasets</a><a class="docs-footer-nextpage" href="../../reference/authentication/">Authentication »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 12 March 2025 03:00">Wednesday 12 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
